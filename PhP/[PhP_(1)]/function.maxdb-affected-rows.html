<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>maxdb_affected_rows</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="Manuale PHP"
HREF="index.html"><LINK
REL="UP"
TITLE="MaxDB PHP Extension"
HREF="ref.maxdb.html"><LINK
REL="PREVIOUS"
TITLE="MaxDB PHP Extension"
HREF="ref.maxdb.html"><LINK
REL="NEXT"
TITLE="maxdb_autocommit"
HREF="function.maxdb-autocommit.html"><META
HTTP-EQUIV="Content-type"
CONTENT="text/html; charset=UTF-8"></HEAD
><BODY
CLASS="refentry"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Manuale PHP</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="ref.maxdb.html"
ACCESSKEY="P"
>Indietro</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="function.maxdb-autocommit.html"
ACCESSKEY="N"
>Avanti</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="function.maxdb-affected-rows"
></A
>maxdb_affected_rows</H1
><DIV
CLASS="refnamediv"
><A
NAME="AEN71744"
></A
><P
>    (PECL)</P
>maxdb_affected_rows<P
>    (no version information, might be only in CVS)</P
>maxdb-&#62;affected_rows&nbsp;--&nbsp;Gets the number of affected rows in a previous MaxDB operation</DIV
><DIV
CLASS="refsect1"
><A
NAME="AEN71748"
></A
><H2
>Description</H2
><P
>Procedural style:</P
>int <B
CLASS="methodname"
>maxdb_affected_rows</B
> ( resource link )<BR
></BR
><P
>Object oriented style (property):</P
>class <B
CLASS="classname"
>maxdb</B
> { <BR
></BR
>int affected_rows<BR
></BR
>}<P
>&#13;   <B
CLASS="function"
>maxdb_affected_rows()</B
> returns the number of rows affected by the last 
   INSERT, UPDATE, or DELETE query associated with the provided <VAR
CLASS="parameter"
>link</VAR
>
   parameter. If this number cannot be determined, this function will return -1.
  </P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Nota: </B
>
    For SELECT statements <B
CLASS="function"
>maxdb_affected_rows()</B
> works like
    <A
HREF="function.maxdb-num-rows.html"
><B
CLASS="function"
>maxdb_num_rows()</B
></A
>.
   </P
></BLOCKQUOTE
></DIV
><P
>&#13;   The <B
CLASS="function"
>maxdb_affected_rows()</B
> function only works with queries which modify
   a table. In order to return the number of rows from a SELECT query, use the
   <A
HREF="function.maxdb-num-rows.html"
><B
CLASS="function"
>maxdb_num_rows()</B
></A
> function instead.
  </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="AEN71774"
></A
><H2
>Return Values</H2
><P
>&#13;   An integer greater than zero indicates the number of rows affected or retrieved. 
   Zero indicates that no records where updated for an UPDATE statement, no rows matched 
   the WHERE clause in the query or that no query has yet been executed. 
   -1 indicates that the number of rows affected can not be determined.
  </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="AEN71777"
></A
><H2
>See also</H2
><P
>&#13;   <A
HREF="function.maxdb-num-rows.html"
><B
CLASS="function"
>maxdb_num_rows()</B
></A
>,
   <A
HREF="function.maxdb-info.html"
><B
CLASS="function"
>maxdb_info()</B
></A
>.
  </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="AEN71782"
></A
><H2
>Example</H2
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN71784"
></A
><P
><B
>Esempio 1. Object oriented style</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><code><font color="#000000">
<font color="#0000BB">&lt;?php<br />$maxdb </font><font color="#007700">= new </font><font color="#0000BB">maxdb</font><font color="#007700">(</font><font color="#DD0000">"localhost"</font><font color="#007700">, </font><font color="#DD0000">"MONA"</font><font color="#007700">, </font><font color="#DD0000">"RED"</font><font color="#007700">, </font><font color="#DD0000">"DEMODB"</font><font color="#007700">);<br /><br /></font><font color="#FF8000">/* check connection */<br /></font><font color="#007700">if (</font><font color="#0000BB">maxdb_connect_errno</font><font color="#007700">()) {<br />&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">printf</font><font color="#007700">(</font><font color="#DD0000">"Connect failed: %s\n"</font><font color="#007700">, </font><font color="#0000BB">maxdb_connect_error</font><font color="#007700">());<br />&nbsp;&nbsp;&nbsp;exit();<br />}<br /><br /></font><font color="#0000BB">maxdb_report </font><font color="#007700">(</font><font color="#0000BB">MAXDB_REPORT_OFF</font><font color="#007700">);<br /></font><font color="#0000BB">$maxdb</font><font color="#007700">-&gt;</font><font color="#0000BB">query</font><font color="#007700">(</font><font color="#DD0000">"DROP TABLE mycustomer"</font><font color="#007700">);<br /></font><font color="#0000BB">maxdb_report </font><font color="#007700">(</font><font color="#0000BB">MAXDB_REPORT_ERROR</font><font color="#007700">);<br /><br /></font><font color="#FF8000">/* Insert rows */<br /></font><font color="#0000BB">$maxdb</font><font color="#007700">-&gt;</font><font color="#0000BB">query</font><font color="#007700">(</font><font color="#DD0000">"CREATE TABLE mycustomer AS SELECT * from hotel.customer"</font><font color="#007700">);<br /></font><font color="#0000BB">printf</font><font color="#007700">(</font><font color="#DD0000">"Affected rows (INSERT): %d\n"</font><font color="#007700">, </font><font color="#0000BB">$maxdb</font><font color="#007700">-&gt;</font><font color="#0000BB">affected_rows</font><font color="#007700">);<br /><br /></font><font color="#0000BB">$maxdb</font><font color="#007700">-&gt;</font><font color="#0000BB">query</font><font color="#007700">(</font><font color="#DD0000">"ALTER TABLE mycustomer ADD Status int default 0"</font><font color="#007700">);<br /><br /></font><font color="#FF8000">/* update rows */<br /></font><font color="#0000BB">$maxdb</font><font color="#007700">-&gt;</font><font color="#0000BB">query</font><font color="#007700">(</font><font color="#DD0000">"UPDATE mycustomer SET Status=1 WHERE cno &gt; 50"</font><font color="#007700">);<br /></font><font color="#0000BB">printf</font><font color="#007700">(</font><font color="#DD0000">"Affected rows (UPDATE): %d\n"</font><font color="#007700">, </font><font color="#0000BB">$maxdb</font><font color="#007700">-&gt;</font><font color="#0000BB">affected_rows</font><font color="#007700">);<br /><br /></font><font color="#FF8000">/* delete rows */<br /></font><font color="#0000BB">$maxdb</font><font color="#007700">-&gt;</font><font color="#0000BB">query</font><font color="#007700">(</font><font color="#DD0000">"DELETE FROM mycustomer WHERE cno &lt; 50"</font><font color="#007700">);<br /></font><font color="#0000BB">printf</font><font color="#007700">(</font><font color="#DD0000">"Affected rows (DELETE): %d\n"</font><font color="#007700">, </font><font color="#0000BB">$maxdb</font><font color="#007700">-&gt;</font><font color="#0000BB">affected_rows</font><font color="#007700">);<br /><br /></font><font color="#FF8000">/* select all rows */<br /></font><font color="#0000BB">$result </font><font color="#007700">= </font><font color="#0000BB">$maxdb</font><font color="#007700">-&gt;</font><font color="#0000BB">query</font><font color="#007700">(</font><font color="#DD0000">"SELECT title FROM mycustomer"</font><font color="#007700">);<br /></font><font color="#0000BB">printf</font><font color="#007700">(</font><font color="#DD0000">"Affected rows (SELECT): %d\n"</font><font color="#007700">, </font><font color="#0000BB">$maxdb</font><font color="#007700">-&gt;</font><font color="#0000BB">affected_rows</font><font color="#007700">);<br /><br /></font><font color="#0000BB">$result</font><font color="#007700">-&gt;</font><font color="#0000BB">close</font><font color="#007700">();<br /><br /></font><font color="#FF8000">/* Delete table Language */<br /></font><font color="#0000BB">$maxdb</font><font color="#007700">-&gt;</font><font color="#0000BB">query</font><font color="#007700">(</font><font color="#DD0000">"DROP TABLE mycustomer"</font><font color="#007700">);<br /><br /></font><font color="#FF8000">/* close connection */<br /></font><font color="#0000BB">$maxdb</font><font color="#007700">-&gt;</font><font color="#0000BB">close</font><font color="#007700">();<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN71787"
></A
><P
><B
>Esempio 2. Procedural style</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><code><font color="#000000">
<font color="#0000BB">&lt;?php<br />$link </font><font color="#007700">= </font><font color="#0000BB">maxdb_connect</font><font color="#007700">(</font><font color="#DD0000">"localhost"</font><font color="#007700">, </font><font color="#DD0000">"MONA"</font><font color="#007700">, </font><font color="#DD0000">"RED"</font><font color="#007700">, </font><font color="#DD0000">"DEMODB"</font><font color="#007700">);<br /><br />if (!</font><font color="#0000BB">$link</font><font color="#007700">) {<br />&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">printf</font><font color="#007700">(</font><font color="#DD0000">"Can't connect to localhost. Error: %s\n"</font><font color="#007700">, </font><font color="#0000BB">maxdb_connect_error</font><font color="#007700">());<br />&nbsp;&nbsp;&nbsp;exit();<br />}<br /><br /></font><font color="#0000BB">maxdb_report </font><font color="#007700">(</font><font color="#0000BB">MAXDB_REPORT_OFF</font><font color="#007700">);<br /></font><font color="#0000BB">maxdb_query</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">,</font><font color="#DD0000">"DROP TABLE mycustomer"</font><font color="#007700">);<br /></font><font color="#0000BB">maxdb_report </font><font color="#007700">(</font><font color="#0000BB">MAXDB_REPORT_ERROR</font><font color="#007700">);<br /><br /></font><font color="#FF8000">/* Insert rows */<br /></font><font color="#0000BB">maxdb_query</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">, </font><font color="#DD0000">"CREATE TABLE mycustomer AS SELECT * from hotel.customer"</font><font color="#007700">);<br /></font><font color="#0000BB">printf</font><font color="#007700">(</font><font color="#DD0000">"Affected rows (INSERT): %d\n"</font><font color="#007700">, </font><font color="#0000BB">maxdb_affected_rows</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">));<br /><br /></font><font color="#0000BB">maxdb_query</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">, </font><font color="#DD0000">"ALTER TABLE mycustomer ADD Status int default 0"</font><font color="#007700">);<br /><br /></font><font color="#FF8000">/* update rows */<br /></font><font color="#0000BB">maxdb_query</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">, </font><font color="#DD0000">"UPDATE mycustomer SET Status=1 WHERE cno &gt; 50"</font><font color="#007700">);<br /></font><font color="#0000BB">printf</font><font color="#007700">(</font><font color="#DD0000">"Affected rows (UPDATE): %d\n"</font><font color="#007700">, </font><font color="#0000BB">maxdb_affected_rows</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">));<br /><br /></font><font color="#FF8000">/* delete rows */<br /></font><font color="#0000BB">maxdb_query</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">, </font><font color="#DD0000">"DELETE FROM mycustomer WHERE cno &lt; 50"</font><font color="#007700">);<br /></font><font color="#0000BB">printf</font><font color="#007700">(</font><font color="#DD0000">"Affected rows (DELETE): %d\n"</font><font color="#007700">, </font><font color="#0000BB">maxdb_affected_rows</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">));<br /><br /></font><font color="#FF8000">/* select all rows */<br /></font><font color="#0000BB">$result </font><font color="#007700">= </font><font color="#0000BB">maxdb_query</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">, </font><font color="#DD0000">"SELECT title FROM mycustomer"</font><font color="#007700">);<br /></font><font color="#0000BB">printf</font><font color="#007700">(</font><font color="#DD0000">"Affected rows (SELECT): %d\n"</font><font color="#007700">, </font><font color="#0000BB">maxdb_affected_rows</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">));<br /><br /></font><font color="#0000BB">maxdb_free_result</font><font color="#007700">(</font><font color="#0000BB">$result</font><font color="#007700">);<br /><br /></font><font color="#FF8000">/* Delete table Language */<br /></font><font color="#0000BB">maxdb_query</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">, </font><font color="#DD0000">"DROP TABLE mycustomer"</font><font color="#007700">);<br /><br /></font><font color="#FF8000">/* close connection */<br /></font><font color="#0000BB">maxdb_close</font><font color="#007700">(</font><font color="#0000BB">$link</font><font color="#007700">);<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><P
>&#13;    The above examples would produce the following output:
  </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><PRE
CLASS="screen"
>Affected rows (INSERT): 15
Affected rows (UPDATE): 15
Affected rows (DELETE): 0
Affected rows (SELECT): 15</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="ref.maxdb.html"
ACCESSKEY="P"
>Indietro</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Partenza</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="function.maxdb-autocommit.html"
ACCESSKEY="N"
>Avanti</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>MaxDB PHP Extension</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="ref.maxdb.html"
ACCESSKEY="U"
>Risali</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>maxdb_autocommit</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>