<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>fopen</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="Manuale PHP"
HREF="index.html"><LINK
REL="UP"
TITLE="Filesystem Functions"
HREF="ref.filesystem.html"><LINK
REL="PREVIOUS"
TITLE="fnmatch"
HREF="function.fnmatch.html"><LINK
REL="NEXT"
TITLE="fpassthru"
HREF="function.fpassthru.html"><META
HTTP-EQUIV="Content-type"
CONTENT="text/html; charset=UTF-8"></HEAD
><BODY
CLASS="refentry"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Manuale PHP</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="function.fnmatch.html"
ACCESSKEY="P"
>Indietro</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="function.fpassthru.html"
ACCESSKEY="N"
>Avanti</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="function.fopen"
></A
>fopen</H1
><DIV
CLASS="refnamediv"
><A
NAME="AEN41597"
></A
><P
>    (PHP 3, PHP 4, PHP 5)</P
>fopen&nbsp;--&nbsp;Apre un file o un URL</DIV
><DIV
CLASS="refsect1"
><A
NAME="AEN41600"
></A
><H2
>Descrizione</H2
>resource <B
CLASS="methodname"
>fopen</B
> ( string filename, string mode [, bool use_include_path [, resource zcontext]] )<BR
></BR
><P
>&#13;     La funzione <B
CLASS="function"
>fopen()</B
> apre un collegamneto tra una risorsa, indicata
     dal parametro <VAR
CLASS="parameter"
>filename</VAR
>, ed un flusso.  Se il parametro
     <VAR
CLASS="parameter"
>filename</VAR
> è del tipo "scheme://...",
     si assume essere un URL ed il PHP cercherà il modulo di gestione del protocollo
     (detto anche wrapper) per quello schema. Se non vi sono wrapper
     registrati per il protocollo richiesto, il PHP genererà un
     messaggio per aiutare a trovare potenziali problemi nello script
     e quindi procede considerando <VAR
CLASS="parameter"
>filename</VAR
>
     come un file regolare.
    </P
><P
>&#13;     Se il PHP ha stabilito che <VAR
CLASS="parameter"
>filename</VAR
> indica un file
     locale, tenterà di aprire detto file come stream.
     Il file in oggetto dovrà esere accessibile dal PHP, occorre, pertanto, assicurasi che
     i permessi di accesso del file lo consentano.
     Se si è attivato il <A
HREF="features.safe-mode.html#ini.safe-mode"
>modalità sicura</A
>,
     oppure <A
HREF="features.safe-mode.html#ini.open-basedir"
>open_basedir</A
> si avranno
     ulteriori restrizioni.
    </P
><P
>&#13;     Se il PHP ha stabilito che <VAR
CLASS="parameter"
>filename</VAR
> indica un
     protocollo registrato, e che tale protocollo è registrato come un URL
     di rete, il PHP verificherà che
     <A
HREF="ref.filesystem.html#ini.allow-url-fopen"
>allow_url_fopen</A
>
     sia abilitato.Se fosse disabilitato, il PHP genererà un 'notice' e
     la funzione fallirà.
    </P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Nota: </B
>
      L'elenco dei protocolli supportati si trova in <A
HREF="wrappers.html"
>Appendice M</A
>.
      Alcuni protocolli (indicati anche come <VAR
CLASS="literal"
>wrappers</VAR
>) supportano
      il <VAR
CLASS="literal"
>context</VAR
> e/o le opzioni del <TT
CLASS="filename"
>php.ini</TT
>
      Fare riferimento alle pagine specifiche del protocollo per avere l'elenco delle opzioni
      che possono essere utilizzate. (Ad esempio il parametro del <TT
CLASS="filename"
>php.ini</TT
>
      <VAR
CLASS="literal"
>user_agent</VAR
> è utilizzato dal wrapper <VAR
CLASS="literal"
>http</VAR
>)
      Per una descrizione del <VAR
CLASS="literal"
>contexts</VAR
> e del
      <VAR
CLASS="parameter"
>zcontext</VAR
>, fare riferimento a <A
HREF="ref.stream.html"
>Riferimento CXLIV, <I
>Stream Functions</I
></A
>.
     </P
></BLOCKQUOTE
></DIV
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Nota: </B
>Il supporto per il contesto è stato
aggiunto in PHP 5.0.0. Per la descrizione del <VAR
CLASS="literal"
>contesto</VAR
>, fare riferimento a
<A
HREF="ref.stream.html"
>Riferimento CXLIV, <I
>Stream Functions</I
></A
>.
</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Nota: </B
>
  	      Come per PHP 4.3.2, la modalità di default è impostata a binarioper tutte
  	      le piattaforme che distinguono tra modalità binaria e testuale.  Se si hanno problemi 
  	      con i propri script dopo l'aggiornamento, provare a utilizzare il flag
  	      <VAR
CLASS="literal"
>'t'</VAR
> come sostitutivo finchè si ha completato uno 
  	      script maggiormente portabile come richiesto sopra.
  	     </P
></BLOCKQUOTE
></DIV
><P
>&#13;     Il parametro <VAR
CLASS="parameter"
>mode</VAR
> indica il tipo di accesso
     richiesto per il flusso. Esso può essere:
     <DIV
CLASS="table"
><A
NAME="AEN41650"
></A
><P
><B
>Tabella 1. 
       Elenco dei possibili valori usati da <B
CLASS="function"
>fopen()</B
> 
       per il parametro <VAR
CLASS="parameter"
>mode</VAR
>
      </B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
><VAR
CLASS="parameter"
>mode</VAR
></TH
><TH
>Descrizione</TH
></TR
></THEAD
><TBODY
><TR
><TD
><VAR
CLASS="literal"
>'r'</VAR
></TD
><TD
>&#13;          Apre in sola lettura; posiziona il puntatore 
          all'inizio del file.
         </TD
></TR
><TR
><TD
><VAR
CLASS="literal"
>'r+'</VAR
></TD
><TD
>&#13;          Apre in lettura e scrittura; posiziona il puntatore 
          all'inizio del file.
         </TD
></TR
><TR
><TD
><VAR
CLASS="literal"
>'w'</VAR
></TD
><TD
>&#13;           Apre il file in sola scrittura; posiziona il puntatore all'inizio del file
           e tronca il file alla lunghezza zero.
           Se il file non esiste, tenta di crearlo.
         </TD
></TR
><TR
><TD
><VAR
CLASS="literal"
>'w+'</VAR
></TD
><TD
>&#13;          Apre in lettura e scrittura; posiziona il puntatore all'inizio del file
          e tronce il file alla lunghezza zero.
          Se il file non esiste, tenta di crearlo.
         </TD
></TR
><TR
><TD
><VAR
CLASS="literal"
>'a'</VAR
></TD
><TD
>&#13;          Apre in sola scrittura; posiziona il puntatore alla fine 
          del file. Se il file non esiste, tenta di crearlo.
         </TD
></TR
><TR
><TD
><VAR
CLASS="literal"
>'a+'</VAR
></TD
><TD
>&#13;          Apre in lettura e scrittura; posiziona il 
          puntatore alla fine del file. Se il file non esiste, tenta 
          di crearlo.
         </TD
></TR
><TR
><TD
><VAR
CLASS="literal"
>'x'</VAR
></TD
><TD
>&#13;          Crea ed apre il file in sola scrittura; posiziona il puntatore all'inizio
          del file. Se il file esiste già la chiamata a
          <B
CLASS="function"
>fopen()</B
> fallirà restituendo <TT
CLASS="constant"
><B
>FALSE</B
></TT
> e verrà generato
          un errore di lievllo <TT
CLASS="constant"
><B
>E_WARNING</B
></TT
>. Se il file 
          non esiste si tenterà di crearlo. Questo equivale a 
          specificare i flag <VAR
CLASS="literal"
>O_EXCL|O_CREAT</VAR
> nella
          sottostante chiamata a <VAR
CLASS="literal"
>open(2)</VAR
> . Questa opzione è
          supportata a partire dalla versione 4.3.2 di PHP, e funziona solo con i file locali.
         </TD
></TR
><TR
><TD
><VAR
CLASS="literal"
>'x+'</VAR
></TD
><TD
>&#13;          Crea ed apre il file in lettura e scrittura; posiziona il puntatore all'inizio
          del file. Se il file esiste già la chiamata a
          <B
CLASS="function"
>fopen()</B
> fallirà restituendo <TT
CLASS="constant"
><B
>FALSE</B
></TT
> e verrà generato
          un errore di lievllo <TT
CLASS="constant"
><B
>E_WARNING</B
></TT
>. Se il file 
          non esiste si tenterà di crearlo. Questo equivale a 
          specificare i flag <VAR
CLASS="literal"
>O_EXCL|O_CREAT</VAR
> nella
          sottostante chiamata a <VAR
CLASS="literal"
>open(2)</VAR
> . Questa opzione è
          supportata a partire dalla versione 4.3.2 di PHP, e funziona solo con i file locali.
         </TD
></TR
></TBODY
></TABLE
></DIV
>
    </P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Nota: </B
>
      Differenti famiglie di file system hanno differenti tipi di terminatori
      di riga. Quando si scrive un file di testo e si desidera inserire una interruzione 
      di linea, occorre utilizzare il terminatore appropriato per il sistema operativo
      utilizzato. I sistemi basati su Unix utilizzano <VAR
CLASS="literal"
>\n</VAR
> come
      terminatore di riga, i sistemi basati su Windows utilizzano <VAR
CLASS="literal"
>\r\n</VAR
>
      mentre i sistemi Macintosh utilizzano 
      <VAR
CLASS="literal"
>\r</VAR
>.
     </P
><P
>&#13;      Se si utilizza un errato terminatore di riga quando si scrivono i file, 
      si può verificare che altre applicazioni accedendo a questi file abbiano 
      comportamenti bizzarri.
     </P
><P
>&#13;      Windows ha un flag di traduzione della modalità testo (<VAR
CLASS="literal"
>'t'</VAR
>)
      che in modo trasparente converte <VAR
CLASS="literal"
>\n</VAR
>  in
      <VAR
CLASS="literal"
>\r\n</VAR
> mentre si lavora sul file. Ovviamente si ha anche
      il flag <VAR
CLASS="literal"
>'b'</VAR
> per forzare una modalità binaria, nella quale non
      si ha la conversione dei dati. Se si usano questi flag, 
      <VAR
CLASS="literal"
>'b'</VAR
> oppure <VAR
CLASS="literal"
>'t'</VAR
>, devono essere posizionati
      come ultimo carattere del parametro <VAR
CLASS="parameter"
>mode</VAR
>.
     </P
><P
>&#13;      La modalità di conversione di default dipende dalla SAPI e dalla versione 
      di PHP che si sta utlizzando, pertanto si incoraggia l'uso dei flag appropriati per
      aumentare la portabilità degli script. Si dovrebbe utilizzare <VAR
CLASS="literal"
>'t'</VAR
>
      se si lavora con dei file di testo, e si utilizza 
      <VAR
CLASS="literal"
>\n</VAR
> per indicare il fine linea, e ci si aspetta che
      che altre applicazioni, tipo notepad, leggano il file prodotto. In tutti 
      gli altri casi si dovrebbe utilizzare <VAR
CLASS="literal"
>'b'</VAR
>
     </P
><P
>&#13;      Se non si specifica il flag 'b' quando si lavora con file binari, si
      possono avere situazioni anomale nei dati, tipo immagini corrotte,
      e situazioni anomale con i caratteri <VAR
CLASS="literal"
>\r\n</VAR
>.
     </P
></BLOCKQUOTE
></DIV
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Nota: </B
>
  	      Per la portabilità, si consiglia vivamente di usare sempre il flag
  	      'b' quando si aprono files con <B
CLASS="function"
>fopen()</B
>.
  	     </P
></BLOCKQUOTE
></DIV
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Nota: </B
>
      Inoltre, sempre per la portabilità, è anche fortemente raccomandato
       di aggiornare il codice che utilizza o che si avvale del mode
       <VAR
CLASS="literal"
>'t'</VAR
> così da utilizzare il corretto terminatore di linea invece del
       <VAR
CLASS="literal"
>'b'</VAR
> mode.
      </P
></BLOCKQUOTE
></DIV
><P
>&#13;     Il terzo parametro opzionale <VAR
CLASS="parameter"
>use_include_path</VAR
>
     può essere impostato a '1' oppure a <TT
CLASS="constant"
><B
>TRUE</B
></TT
> se si desidera cercare il file in
     <A
HREF="ini.core.html#ini.include-path"
>include_path</A
>.
    </P
><P
>&#13;     Se la open fallisce, la funzione restituisce <TT
CLASS="constant"
><B
>FALSE</B
></TT
> e viene generato un errore
     di tipo <TT
CLASS="constant"
><B
>E_WARNING</B
></TT
>. Si può utilizzare 
     <A
HREF="language.operators.errorcontrol.html"
>@</A
>
     per sopprimere questo warning.
    </P
><P
>&#13;     <TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN41739"
></A
><P
><B
>Esempio 1. Esempi di <B
CLASS="function"
>fopen()</B
></B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><code><font color="#000000">
<font color="#0000BB">&lt;?php<br />$handle </font><font color="#007700">= </font><font color="#0000BB">fopen</font><font color="#007700">(</font><font color="#DD0000">"/home/rasmus/file.txt"</font><font color="#007700">, </font><font color="#DD0000">"r"</font><font color="#007700">);<br /></font><font color="#0000BB">$handle </font><font color="#007700">= </font><font color="#0000BB">fopen</font><font color="#007700">(</font><font color="#DD0000">"/home/rasmus/file.gif"</font><font color="#007700">, </font><font color="#DD0000">"wb"</font><font color="#007700">);<br /></font><font color="#0000BB">$handle </font><font color="#007700">= </font><font color="#0000BB">fopen</font><font color="#007700">(</font><font color="#DD0000">"http://www.example.com/"</font><font color="#007700">, </font><font color="#DD0000">"r"</font><font color="#007700">);<br /></font><font color="#0000BB">$handle </font><font color="#007700">= </font><font color="#0000BB">fopen</font><font color="#007700">(</font><font color="#DD0000">"ftp://user:password@example.com/somefile.txt"</font><font color="#007700">, </font><font color="#DD0000">"w"</font><font color="#007700">);<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
>
    </P
><P
>&#13;     Se si dovessero manifestare dei problemi nella lettura o scrittura
     di file e si sta utilizzando la versione server di PHP, occorre verificare
     che i file e le directory utilizzate dallo script
     siano accessibili dal processo del server.
    </P
><P
>&#13;     Sulla piattaforma Windows occorre prestare attenzione ai backslash 
     nei percorsi dei file; questi devono essere preceduti dal caratteri di escape '\', oppure utilizzare 
     lo slash '/'.
     <DIV
CLASS="informalexample"
><P
></P
><A
NAME="AEN41745"
></A
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><code><font color="#000000">
<font color="#0000BB">&lt;?php<br />$handle </font><font color="#007700">= </font><font color="#0000BB">fopen</font><font color="#007700">(</font><font color="#DD0000">"c:\\data\\info.txt"</font><font color="#007700">, </font><font color="#DD0000">"r"</font><font color="#007700">);<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code></TD
></TR
></TABLE
><P
></P
></DIV
>
    </P
><DIV
CLASS="warning"
><P
></P
><TABLE
CLASS="warning"
BORDER="1"
WIDTH="100%"
><TR
><TD
ALIGN="CENTER"
><B
>Avvertimento</B
></TD
></TR
><TR
><TD
ALIGN="LEFT"
><P
>When using SSL, Microsoft IIS
will violate the protocol by closing the connection without sending a
close_notify indicator.  PHP will report this as "SSL: Fatal Protocol Error"
when you reach the end of the data.  To workaround this, you should lower your
<A
HREF="ref.errorfunc.html#ini.error-reporting"
>error_reporting</A
> level not to include warnings.
PHP 4.3.7 and higher can detect buggy IIS server software when you open
the stream using the https:// wrapper and will suppress the warning for you.
If you are using <A
HREF="function.fsockopen.html"
><B
CLASS="function"
>fsockopen()</B
></A
> to create an ssl:// socket,
you are responsible for detecting and suppressing the warning yourself.
</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Nota: </B
>Quando <A
HREF="features.safe-mode.html"
>safe-mode</A
> è abilitato, PHP controlla che 
la directory nella quale si sta lavorando, abbia lo stesso UID dello 
script che è in esecuzione.</P
></BLOCKQUOTE
></DIV
><P
>&#13;     Vedere anche <A
HREF="wrappers.html"
>Appendice M</A
>,
     <A
HREF="function.fclose.html"
><B
CLASS="function"
>fclose()</B
></A
>,
     <A
HREF="function.fgets.html"
><B
CLASS="function"
>fgets()</B
></A
>, 
     <A
HREF="function.fread.html"
><B
CLASS="function"
>fread()</B
></A
>,
     <A
HREF="function.fwrite.html"
><B
CLASS="function"
>fwrite()</B
></A
>,
     <A
HREF="function.fsockopen.html"
><B
CLASS="function"
>fsockopen()</B
></A
>,
     <A
HREF="function.file.html"
><B
CLASS="function"
>file()</B
></A
>,
     <A
HREF="function.file-exists.html"
><B
CLASS="function"
>file_exists()</B
></A
>,
     <A
HREF="function.is-readable.html"
><B
CLASS="function"
>is_readable()</B
></A
>,
     <A
HREF="function.stream-set-timeout.html"
><B
CLASS="function"
>stream_set_timeout()</B
></A
> e
     <A
HREF="function.popen.html"
><B
CLASS="function"
>popen()</B
></A
>.
    </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="function.fnmatch.html"
ACCESSKEY="P"
>Indietro</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Partenza</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="function.fpassthru.html"
ACCESSKEY="N"
>Avanti</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>fnmatch</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="ref.filesystem.html"
ACCESSKEY="U"
>Risali</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>fpassthru</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>